from quadforlss import forecasting

import yaml

import sys

if len(sys.argv) == 1:
    print('Choose your configuration file!')
    sys.exit()

## Read configuration file

values_file = str(sys.argv[1])

with open(values_file, 'r') as stream:
    data = yaml.safe_load(stream)

values = data

config = values['forecast_config']

variables_list= config['variables_list']
variables_list_fisher = config['variables_list_fisher']
cov_dict = config['cov_dict']

variables_of_interest = config['variables_of_interest']

analysis_config = values['analysis_config']
biases_definitions = analysis_config['biases_definitions']
noise_prefix = analysis_config['N']
new_bias = analysis_config['new_bias']

terms = biases_definitions.keys()


numpify =  True

forecast = forecasting.Forecaster(*variables_list)
forecast.add_cov_matrix(cov_dict)
forecast.get_fisher_matrix(variables_list_fisher, numpify = numpify)




for v in variables_of_interest:
    v_err = expr.get_non_marginalized_error(v, **dictionary)





